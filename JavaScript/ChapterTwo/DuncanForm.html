<html>
    <head>
        <title>Duncan's Just-In-Time Donuts</title>
    </head>
    <body>
        <div id="frame">
            <form id="orderform" name="orderform" method="POST">
                    <div class="field">
                            Name:<input type="text" id="name" name="name" value=""/>
                    </div>
                <div >
                    # of cake donuts:<input type="text" id="cakedonuts" name="cakedonuts" value=""/>
                 </div>

                <div >
                    # of glazed donuts:<input type="text" id="glazeddonuts" name="glazeddonuts" value=""/>
                </div>
                <div >
                        Minutes Till pickUp:<input type="text" id="minutepickup" name="minutepickup" value=""/>
                </div>
                <div >
                        <<input id="updateButton" type="button" value="Place Order" />>
                </div>
                
            <div class="field">
                    SubTotal<input type="text" id="subtotalid" name="subtotalid" value=""/>
            </div>
            <div class="field">
                    Tax:<input type="text" id="taxid" name="taxid" value=""/>
            </div>
            <div class="field">
                    Total:<input type="text" id="totalid" name="totalid" value=""/>
            </div>
            </form>
        </div>
    </body>

    <script type ="text/javascript">
        
        (function orderApp(){

            var updateButton=document.getElementById("updateButton").addEventListener("button", order);
            
            function order(){
                var form =document.getElementById("orderform");
                updateOrder(form.form);
            }
            function updateOrder(){
                console.log("update Order is called");
                placeOrder();
                const TAXRATE=0.0925;
                const DONUTPRICE=0.50;
                var numCakeDonuts = parseInt(document.getElementById("cakedonuts").value);
                var numGlazedDonuts = parseInt(document.getElementById("glazeddonuts").value);
                if(isNaN(numCakeDonuts)){
                    numCakeDonuts=0;
                }
                if(isNaN(numGlazedDonuts)){
                    numGlazedDonuts=0;
                }
                var subTotal =(numCakeDonuts+numGlazedDonuts)*DONUTPRICE;
                var tax=subTotal*TAXRATE;
                var total=subTotal+tax;
                document.getElementById("subtotalid").value="$"+subTotal.toFixed(2);
                document.getElementById("taxid").value="$"+subTotal.toFixed(2);
                document.getElementById("totalid").value="$"+subTotal.toFixed(2);
        }
            function placeOrder(){
            if(document.getElementById("name").value==""){
                alert("I am sorry but you must provide a name before submitting your order.")
            }
            if(document.getElementById("minutepickup").value==""){
                alert("I am sorry but you must provide the number of minutes untill pickup before submitting your order.")
            }
            if(document.getElementById("cakedonuts").value==""){
                alert("I am sorry but you must provide the number of cake dounts  before submitting your order.")
            }
            if(document.getElementById("glazeddonuts").value==""){
                alert("I am sorry but you must provide the number of glazed donuts before submitting your order.")
            }
        }
        
        }
        )();

        </script>
</html>